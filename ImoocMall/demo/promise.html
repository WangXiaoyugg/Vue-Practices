<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>promise-demo</title>
    <style>
        #log{
            background: #202020;
            color: #fff;
            padding: 10px;
        }
    </style>
</head>
<body>
<h1>Promise的基本使用</h1>
<div id="log">

</div>
<script>
    var str = `
        let checkLogin = () => {
        return new Promise((resolve,reject) => {
            let userId = document.cookie.indexOf('userId') > -1 ? true : false;
            if(userId=true){
                resolve({
                    status:0,
                    result:'login success'
                })
            }
            reject('error happen')

        })
    };

    let getUserInfo = () => {
        return new Promise((resolve,reject) => {
            resolve({
                status:0,
                userId:'110',
                userName:'garen',
            })
        })
    };

    checkLogin().then(res => {
        console.log(res);
        if(res.status === 0){
            return getUserInfo();
        }
    }).catch((err) => {

    }).then((res) => {
    })



    Promise.all([checkLogin(),getUserInfo()]).then(([res1,res2]) => {
    })

    `





    printLog(str);
    function printLog(str) {
        document.getElementById('log').innerText += str;
    }
</script>
</body>
</html>
